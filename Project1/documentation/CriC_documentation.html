<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>CriC</title>
        <style>
            section{margin-left: 5% ; margin-right: 20%; text-align: justify }
            p{text-align: justify}
            img{display: block;margin-left: auto;margin-right: auto;}
            h1{text-align: center; font-size: 40px}
            h4{margin-left:2%;}
        </style>
    </head>

    <body >
        <section>
            <h1>CriC</h1>
            <p>
                <h2>1. Introduction</h2>
                <p>
                    <p>
                        &emsp;CriC is a web platform which manages emergency situations (e.g. earthquakes, fires, floods etc.) by the 
                            authorities or organizations. The application will integrate Google Crisis Map and Fusion Tables or creating 
                            additional layers. These layers would provide information of interest aiming at the occurring events and the 
                            affected areas. 
                    </p>
                    <p>
                        &emsp;We will use CAP (Common Alerting Protocol) for transmitting the notifications and alerts to the population
                            (directly affected or nearby); eventually using social platforms.
                    </p>
                    <p>
                        &emsp;Using Geolocaion API and servicies like Google Person Finder, the system can automatically provide
                            information about finding a missing person (e.g. when the respective person is unconscious or injured) and/or 
                            about possible shelters and rescue routes.
                    </p>
                </p>
            </p>
        </section>

        <section>
            <h2>2. User types</h2>
            <p>
                &emsp; The application admits multiple types of users, each of them being provided with various functionalities.
                <h3>2.1. Regular user</h3>
                <p>
                    <h4>2.1.1. Unuthenticated user/Guest</h4>
                    <p>
                        &emsp; This kind of user has minimal access to the application. He can either register in order to become an authenticated user, 
                        or just use the functionalities provided for him: view the lists of shelters, alerts and missing persons.
                        They will also receive an notification when there is a new alert added.
                    </p>

                    <h4>2.1.2. Authenticated user</h4>
                    <p>
                        &emsp;This user has already created an account and has logged in. In addition to the functionalities of a guest, 
                        this user can also request adding or removing a missing person in the database. If the request to add a missing 
                        person succeeds, the user will receive a notification when the person is found. The removal of a missing person
                        means that the person has been found. 
                    </p>
                </p>
                <h3>2.2. Organization</h3>
                <p>
                    &emsp;This is the most powerful kind of user in this application. They belong to profile organisations or authorities.
                    They can use any of the functionalities mentioned before. They are also responsable of adding or removing shelters,
                    missing people or alerts and checking if the request to do so is justified.
                </p>
            </p>
        </section>

        <section>
            <h2>3. Use cases</h2>
            <p>
                <h3>3.1. Authentification</h3>
                <img src="../doc_img/auth.jpg" alt="Authentification use case diagram">
                <p>
                        <p>&emsp;If the user has an account, then he has to use the username and password he set to login.
                            Otherwise, in order to create an account, a user has to complete a registration form.</p>
                </p>

                <h3>3.2. Handling shelters</h3>
                <img src="../doc_img/shelter.jpg" alt="Shelters use case diagram">
                <p>
                        <p>&emsp; Each available shelter has to be added by an organization account. When a shelter is no longer
                            in use, the organization accounts have to get rid of them. A regular user, wheter logged in or not,
                            is able to view a list of the available shelters.
                        </p>
                </p>

                <h3>3.3. Handling alerts</h3>
                <img src="../doc_img/alert.jpg" alt="Alerts use case diagram">
                <p>
                        <p>&emsp;
                                When a new alert occurs, it is added to the app by an organization account and then removed when
                                it is no longer happening. All users get a notification with information about an alert when it
                                is added and then are able to see a list of all the active alerts.
                        </p>
                </p>

                <h3>3.4. Handling missing people</h3>
                <img src="../doc_img/missing.jpg" alt="Missing people use case diagram">
                <p>
                        <p>&emsp;
                            Any authenticated user can request adding or removing a missing person. The organization accounts have
                            to check if the request is justify and proceed act accordingly. 
                            &emsp; When a user requests adding a missing person, their infomration becoms the contact information
                            for the missing person in case they are found. The user who made the requests will also recieve a notification 
                            when the person is declared found and removed from the database.
                            &emsp;Any user can see the list of missing people.
                        </p>
                </p>
            </p>
        </section>

        <section>
            <h2>4. Database  </h2>
            <p>
                <h3>4.1. Relational database schema</h3>
                <img src="../doc_img/db.jpg" alt="Database relational schema">
                <h3>4.2. Non-relational database schema</h3>
                <img src="../doc_img/ndb.jpg" alt="Database non-relational schema">
                <p>
  
                        <h4>users</h4>
                        <p>
                                After creating an account, the information provided by the user in order to create the account will be
                                saved here.
                        </p>
        
                        <h4>shelters</h4>
                        <p>
                                Contains all the shelters available.
                        </p>
        
                        <h4>emergencies</h4>
                        <p>
                                Contains the emergencies that take place at that certain moment.
                        </p>
        
                        <h4>provide_shelter</h4>
                        <p>
                                Relation between users, emergencies and shelters. Has the role to connect a user which is in the 
                                vecinity of an emergency to a shelter nearby.
                        </p>
        
                        <h4>missing_people</h4>
                            <p>
                                    Contains the people that have been declared missing and information that could be helpful
                                    in order to find them.
                            </p>

                        <h4>find</h4>
                        <p>
                                Relation between users and missing_people. Provides a contact to reach when a person is found.
                        </p>
                </p>
            </p>
        </section>

        <section>
            <h2>5. Technologies</h2>
            <p>
                <h3>5.1. PHP</h3>
                <img src="../doc_img/php.jpg" alt="Php diagram">
                <h3>5.2. HTML5</h3>
                <h3>5.3. CSS3</h3>
                <h3>5.4. MySQL</h3>
                <h3>5.5. Apache</h3>
                <h3>5.6. HTTP</h3>
                <h3>5.7. XAMPP</h3>
                <h3>5.6. JavaScript</h3>
                <h3>5.7. API's</h3>
                <p>
                    <h4>5.7.1. Google Crisis Map</h4>
                    <p>
                            <p>&emsp;Google Crisis Map is a collection of national and regional-scale emergency layers related to weather, 
                                hazards and emergency preparedness and response. It is provided by the Google Crisis Response Team as a 
                                tool that allows creation of mashups for crisis, humanitarian and non-profit purposes. </p>

                            <p>&emsp;The goal is to take crisis-related geographical data and centralize it. The geo-data is stored in a format
                             that can be used with a Geographic Information System; therefore it requires a special software, unavailable
                              for everyone.</p>
                            
                            <p>&emsp;It takes data that lives scattered across various governmental websites or organizations’ websites 
                            (e.g. NOAA, FEMA, Unitar) in many different formats and it makes them available to all users without any
                             kind of special software. The Crisis Map API points at third-party layers, it doesn’t host the data and 
                             it makes the critical disaster geo-data more accessible.</p>
                            
                            <p>&emsp;The Map has various layers: weather-related (precipitation, clouds, storm information, air quality), fires, 
                            floods, evacuation routes, traffic & transit. </p>
                            
                            <p>&emsp;It can be embedded into our web application by creating a mashup inside our code.</p>
                            
                            <ul>The geographic data is accepted in several forms:
                            <li>KML (Keyhole Markup Language) or KMZ (zipped KML)- Google Earth’s XML file format for storing place-marks</li>
                            <li>GeoRSS/ GML (Geography Markup Language) - another Geographical XML</li>
                            <li>GeoJSON - JSON objects </li>
                            <li>Google Fusion Tables</li>
                            </ul>
                            
                            <p>&emsp;We will use Google Fusion Tables to generate the geo-data on the map.</p>
                            
                    </p>
                    <h4>5.7.2. Google Fusion Tables</h4>
                    <p>
                            <p>&emsp;Google Fusion Tables is a web service for data management. Fusion tables are used for gathering, 
                                sharing and visualizing data tables. It can display various imagery, such as: charts, maps, network 
                                graphs or custom layouts.</p>
                            <p>&emsp;We will use location tables to display the corresponded mapped data. Fusion tables can accept 
                                uploaded data in text-delimited formats, such as CSV (comma-separated text) or TSV (other delimiter), 
                                spreadsheet formats: XLS, XSLX, ODS or Google Spreadsheets. The locations can be specified in latitude
                                 and longitude numbers or descriptive text (e.g. “France”) or an address.</p>
                            <p>&emsp; After the Table is created (or updated) and public, we can use a generated ID to add the layer 
                                in Google Crisis Map.</p>
                    </p>
                    <h4>5.7.3. Common Alerting Protocol(CAP)</h4>
                    <p>
                            <p>&emsp;The Common Alerting Protocol is an open, non-proprietary message format for all types of alerts 
                                and notifications. It is basically a special XML file. It does not address any particular application 
                                or telecommunications method; it is compatible with emerging techniques.</p>
                            <p>&emsp;It provides flexible geographic targeting using latitude and longitude shapes, multilingual 
                                messaging, phased or delayed times and expirations, message updates, cancellations; facility for 
                                digital images and audio.</p>
                            <p>&emsp;The structure of it consists of an "alert" segment, which may contain one or more "info" segments,
                                 each of them eventually including one or more "area" and/or "resource" segments. Mostly, the CAP messages 
                                     should include at least one "info" element.</p>
                    </p>
                    <h4>5.7.4. Google Person Finder</h4>
                    <p>
                            <p>&emsp; Any time Google launches Google Person Finder in response to a crisis, government and non profit
                                 organizations can help people locate each other by spreading the word, using the data, and adding 
                                 information. We will use this API to implement out missing persons section of the site.</p>
                            <p>&emsp;The Person Finder application stores and exports records using the People Finder Interchange 
                                Format (PFIF), which is based on XML.</p>
                            <p>&emsp; When displaying any content accessed via the API to a user, we must display a link to the original 
                                source of information to refer any enquiries in connection with that specific record back to the original
                                 source, and may not intermix content accessed via the API with other content in any way that makes it 
                                unclear which content came from which source.</p>
                    </p>
                    <h4>5.7.5. Google Maps Geolocation</h4>
                    <p>
                            <p>&emsp;The Geolocation API returns a location and accuracy radius based on information about cell towers 
                                and WiFi nodes that the mobile client can detect. We will use this API to warn users about emergencies
                                 near their location.</p>
                            <p>&emsp;Communication is done over HTTPS using POST.</p>
                            <p>&emsp;A successful geolocation request will return a JSON-formatted response defining a location and radius.</p>
                            <h5>Google Maps Direction API</h5>
                            <p>&emsp;The Directions API is a service that calculates directions between locations. We can search for 
                                directions for several modes of transportation. We will use this api to guide users to nearby shelters
                                 in case of emergencies.</p>
                            <p>&emsp;We will access the Directions API through an HTTP interface, with requests constructed as a URL
                                 string, using text strings or latitude/longitude coordinates to identify the locations, along with 
                                 our API key.</p>
                    </p>
                </p>
            </p>
        </section>

        <section>
            <h2>6. Application architecture</h2>
            <p>
                <h3>MVC diagram</h3>
                <img src="../doc_img/mvr.jpg" alt="Php diagram">
            </p>
        </section>


        <section>
            <h2>7. Tasks</h2>
            <ul>
                    <li>create database (L)</li>
                    <li>conect to database (L)</li>
                    <li>add emergency (L)</li>
                    <li>remove emergency (L)</li>
                    <li>edit emergency (L)</li>
                    <li>register (I)</li>
                    <li>log in (I)</li>
                    <li>log out (I)</li>
                    <li>edit profile (I)</li>
                    <li>delete profile (I)</li>
                    <li>add shelter (A)</li>
                    <li>delete shelter (A)</li>
                    <li>edit shelter (A)</li>
                    <li>Google crisis map API integration (C)</li>
                    <li>Google Fusion Tables API integration (C)</li>
                    <li>Google Person Finder API integration (A)</li>
                    <li>Geolocation API integration (A)</li>
                    <li>Common Alerting Protocol integration (I)</li>
                    <li>add missing person (L)</li>
                    <li>delete missing person (L)</li>
                    <li>modify missing person (L)</li>
                    <li>basic PHP structure (I)</li>
                    <li>modify HTML into PHP module (C)</li>
                    <li>create HTML missing files (C)</li>
                    <li>create CSS for missing files (C)</li>
            </ul>
            <ul>
            <h3>Authors</h3>
            <li>Balan Ioana Maria (I)</li>
            <li>Cernat Cristina Mihaela (C)</li>
            <li>Ghiran Andrei (A)</li>
            <li>Vega Palma Leandro (L)</li>
            </ul>
            </ul>
        </section>

    </body>
</html>